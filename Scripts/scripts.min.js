var g_rss_feed;function parse_rss(a,b,c){g_rss_feed=a;var e,d,f;$("#main-container").append($('<div id="'+b+'" class="row">').append("<h1>"+c));$(a).find("item").each(function(){e=$(this).find("thumbnail").attr("url").replace("http://","https://");d=$(this).find("title").text();f=$(this).find("description").text();itemLink=$(this).find("link").text();buildStory(b,e,d,f,itemLink)})}
function buildStory(a,b,c,e,d){$("#"+a).append($('<div class="story col-sm-3">').append('<div class="story-img"><img src="'+b+'">').append($('<div class="story-text">').append('<div class="story-title">'+c+'</div> <div class="story-desc">'+e+"</div>")).append('<div class="story-more"><button type="button"class="btn btn-info btn-lg" data-toggle="modal" data-target="#articleModal" data-title="'+c+'" data-link="'+d+'" data-imgurl="'+b+'">Read More'))}
function loadNews(a,b){$.ajax({type:"GET",url:"Scripts/"+a+"_rss.php",dataType:"xml",cache:!1,var1:a,var2:b,success:function(a){parse_rss(a,this.var1,this.var2)}})}function getArticleContent(a){$.ajax({type:"GET",url:"Scripts/content.php?file="+a,datatype:"html",cache:!1,success:parseArticle})}
function parseArticle(a){$(".modal-body").empty();$(".modal-body").append($(a).find(".story-body__introduction").text());$(a).find("p:not([class])").each(function(){console.log($(this).text());$(".modal-body").append("<p>"+$(this).text())})}
function search(a){var b=new RegExp("\\b"+a+"\\b","gi");sectionID="search_results";$("#main-container").empty();$("#main-container").append($('<div id="'+sectionID+'" class="row">').append("<h1>Search Results"));$(g_rss_feed).find("item").each(function(){item=$(this);imgURL=item.find("thumbnail").attr("url").replace("http://","https://");itemTitle=item.find("title").text();itemText=item.find("description").text();itemLink=item.find("link").text();searchData=itemTitle+" "+itemText;console.log(searchData);
0<=searchData.search(b)&&buildStory(sectionID,imgURL,itemTitle,itemText,itemLink)})}
$(document).ready(function(){loadNews("top_stories","Top Stories");$("a:not([class])").click(function(){var a=$(this).attr("href").replace("#",""),b=$(this).text();console.log("ID: "+a," Header: "+b);$("#main-container").empty();loadNews(a,b)});$("#articleModal").on("show.bs.modal",function(a){var b=$(a.relatedTarget);a=b.data("title");var c=b.data("link"),e=c.substr(26),b=b.data("imgurl");console.log(a);console.log(c);console.log(b);var d=$(this);d.find(".modal-title").text(a);d.find("#img-header>img").attr("src",
b);d.find("#source-footer").empty();d.find("#source-footer").append('Source: <a href="'+c+'">'+c);getArticleContent(e)});$("#articleModal").on("hidden.bs.modal",function(){$(this).find(".modal-body").text("...")});$("#search-term-btn").click(function(a){search($("#search-term").val())});$("#search-term").keypress(function(){13==event.keyCode&&search($("#search-term").val())});$(function(){$('[data-toggle="popover"]').popover()});$("#search-help").attr("data-content","To perform a search, type your query into the box on the left and click the search button or hit enter on your keyboard.")});